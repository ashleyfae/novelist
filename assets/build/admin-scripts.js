!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}({10:function(e,t){var n,r;n=jQuery,(r={idNumber:!1,repeatEls:'input:not([type="button"]),select,textarea',init:function(){n(document).ready((function(){r.sortPurchaseLinks()}));var e=n(".novelist-repeatable-group");e.on("click",".novelist-repeater-heading",this.toggleRepeaterSection).on("click",".novelist-add-repeater-section",this.addRepeaterSection).on("click",".novelist-repeater-remove",this.removeRepeaterSection).on("novelist_remove_repeater_section",this.resetRepeaterCounter),e.length&&e.filter(".novelist-repeater-sortable").each((function(){n(this).find("button.novelist-repeater-remove").before('<button class="button novelist-repeater-shift-rows move-up alignleft" title="'+NOVELIST.repeater_move_up+'"><span class="dashicons dashicons-arrow-up-alt2"></span></button> <button class="button novelist-repeater-shift-rows move-down alignleft" title="'+NOVELIST.repeater_move_down+'"><span class="dashicons dashicons-arrow-down-alt2"></span></button>')})).on("click",".novelist-repeater-shift-rows",this.shiftRepeaterRows).on("novelist_add_repeater_section",this.emptyValue)},sortPurchaseLinks:function(){var e=n("#novelist-purchase-links tbody");e.length&&e.sortable({handle:".novelist-drag-handle",items:".novelist-cloned",opacity:.6,cursor:"move",axis:"y",update:function(){}})},toggleRepeaterSection:function(e){n(e.target).hasClass("dashicons-trash")||n(this).parent().toggleClass("novelist-repeater-section-expanded")},resetRepeaterCounter:function(e){n(".novelist-repeatable-group").each((function(){var e=n(this);e.find(".novelist-repeater-section").each((function(t){var r=n(this);r.data("iterator",t),r.find(".novelist-repeater-heading h3").text(e.find(".novelist-add-repeater-section").data("group-title").replace("{#}",t+1))}))}))},shiftRepeaterRows:function(e){e.preventDefault();var t=n(this),a=t.parents(".novelist-repeater-section"),o=t.hasClass("move-up")?a.prev(".novelist-repeater-section"):a.next(".novelist-repeater-section");if(o.length){t.trigger("novelist_shift_rows_start",t);var i=[];a.find(r.repeatEls).each((function(){var e,t=n(this);e="checkbox"===t.attr("type")||"radio"===t.attr("type")?t.is(":checked"):"select"===t.prop("tagName")?t.is(":selected"):t.val(),i.push({val:e,$:t})})),o.find(r.repeatEls).each((function(e){var t=n(this);"checkbox"===t.attr("type")||"radio"===t.attr("type")?(i[e].$.prop("checked",t.is(":checked")),t.prop("checked",i[e].val)):"select"===t.prop("tagName")?(i[e].$.prop("selected",t.is(":selected")),t.prop("selected",i[e].val)):(i[e].$.val(t.val()),t.val(i[e].val))})),t.trigger("novelist_shift_rows_complete",t)}},addRepeaterSection:function(e){e.preventDefault();var t=n(this),a=n(t.data("selector")),o=a.find(".novelist-repeater-section").last(),i=parseInt(o.data("iterator"));r.idNumber=i+1;var s=o.clone();r.newRowHousekeeping(s.data("title",t.data("group-title"))).cleanRow(s,i,!0);var l=n('<div class="novelist-repeater-section novelist-repeater-section-expanded" data-iterator="'+r.idNumber+'">'+s.html()+"</div>");o.after(l),a.find(".novelist-repeater-section").length<=1?a.find(".novelist-repeater-remove").prop("disabled",!0):a.find(".novelist-repeater-remove").prop("disabled",!1),a.trigger("novelist_add_repeater_section",l)},removeRepeaterSection:function(e){e.preventDefault();var t=n(this),a=n(t.data("selector")),o=t.parents(".novelist-repeater-section"),i=a.find(".novelist-repeater-section").length;i>1&&(o.nextAll(".novelist-repeater-section").find(r.repeatEls).each(r.updateRepeaterNameAttr),o.remove(),i<=2?a.find(".novelist-repeater-remove").prop("disabled",!0):a.find(".novelist-repeater-remove").prop("disabled",!1),a.trigger("novelist_remove_repeater_section"))},updateRepeaterNameAttr:function(){var e=n(this),t=e.attr("name");if(void 0===t)return!1;var r=parseInt(e.parents(".novelist-repeater-section").data("iterator")),a=r-1,o=t.replace("["+r+"]","["+a+"]");e.attr("name",o)},newRowHousekeeping:function(e){var t=e.find(".wp-picker-container");return t.length&&t.each((function(){var e=n(this).parent();e.html(e.find('input[type="text"].novelist-colorpicker').attr("style",""))})),r},cleanRow:function(e,t){var a=e.find('input:not([type="button"]), select, textarea, label'),o=e.find("[id]").not('input:not([type="button"]), select, textarea, label');o.length&&o.each((function(){var a=n(this),o=a.attr("id"),i=o.replace("_"+t,"_"+r.idNumber),s=e.find('[data-selector="'+o+'"]');a.attr("id",i),s.length&&s.attr("data-selector",i).data("selector",i)})),a.filter(":checked").prop("checked",!1),a.filter(":selected").prop("selected",!1),e.find(".novelist-repeater-heading h3").length&&e.find(".novelist-repeater-heading h3").text(e.data("title").replace("{#}",r.idNumber+1)),a.each((function(){var e,a=n(this),o=a.attr("for"),i={};if(o)i={for:o.replace("_"+t,"_"+r.idNumber)};else{var s=a.attr("name"),l=s?s.replace("["+t+"]","["+r.idNumber+"]"):"";i={id:(e=a.attr("id"))?e.replace("_"+t,"_"+r.idNumber):"",name:l,"data-iterator":r.idNumber}}a.attr(i).val("")}))},emptyValue:function(e,t){n('input:not([type="button"]), textarea',t).val("")}}).init(),n(".novelist-sortable").sortable({cancel:".novelist-no-sort, textarea, input, select",connectWith:".novelist-sortable",placeholder:"novelist-sortable-placeholder",update:function(e,t){var r=t.item,a=r.parent().attr("id"),o=r.find(".novelist-book-option-disabled");n("#"+a).hasClass("novelist-sorter-enabled-column")?o.val("false"):o.val("true")}}).enableSelection(),n(".novelist-book-option-toggle").click((function(e){n(this).next().slideToggle()})),n("#novelist-book-layout-cover-changer").change((function(){var e=n("#novelist-book-option-cover");e.removeClass((function(e,t){return(t.match(/(^|\s)novelist-book-cover-align-\S+/g)||[]).join(" ")})),e.addClass("novelist-book-cover-align-"+n(this).val())})),n("#novelist-add-link").relCopy(),n(".novelist-color-picker").wpColorPicker(),n("#novelist-reset-tab-button").click((function(e){if(e.preventDefault(),!confirm(NOVELIST.confirm_reset))return!1;var t=n(this).parent();t.append('<span id="novelist-spinner" class="spinner is-active"></span>');var r={action:"novelist_restore_default_settings",tab:n(this).data("current-tab"),section:n(this).data("current-section")};n.post(ajaxurl,r,(function(e){n("#novelist-spinner").remove(),1==e.success?window.location.href=e.data:t.append(e.data)}))})),n("#novelist-import-demo-book").click((function(e){e.preventDefault();var t=n(this).parent();n(this).attr("disabled","true"),t.append('<span id="novelist-spinner" class="spinner is-active" style="float: none;"></span>');var r={action:"novelist_import_demo_book",nonce:n(this).data("nonce")};n.post(ajaxurl,r,(function(e){t.empty().append(e.data)}))}))}});